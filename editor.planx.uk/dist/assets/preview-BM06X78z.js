import{a7 as l,W as m,u as p,j as i,V as c,a5 as f,J as u,K as g,M as n,U as d,Y as h,aa as F}from"./index-CFPw1vJP.js";import{C as x}from"./ContentPage-CXBZ_YBI.js";import{Q as S}from"./Questions-D-dg2tg0.js";import{A as v}from"./index-CO01K9Q0.js";import{P as j}from"./PublicLayout-CsB_Cq8y.js";import{f as y}from"./published-DrSU3fY2.js";import"./Header-p4OIyhRV.js";import"./Card-XAp8rL3L.js";import"./Chip-BB62kn49.js";import"./InputRowLabel-DT0xESl6.js";import"./index-5h7nDx4c.js";const b=async a=>{const o=a.params.flow.split(",")[0],e=a.params.team||await l(window.location.hostname),s=await y(o,e),t=s.flows[0];if(!t)throw new m(`Flow ${o} not found for ${e}`);const w=await P(t.id),r=p.getState();return r.setFlow({id:t.id,flow:w,flowSlug:o}),r.setFlowNameFromSlug(o),r.setGlobalSettings(s.globalSettings[0]),r.setFlowSettings(t.settings),r.setTeam(t.team),i.jsx(j,{children:i.jsx(c,{})})},P=async a=>{var e,s;const o=`http://localhost:7002/flows/${a}/flatten-data`;try{const{data:t}=await f.get(o);return t}catch(t){throw console.log(t),t instanceof v&&alert(`Cannot open this view, navigate back to the graph to keep editing. 

${(s=(e=t.response)==null?void 0:e.data)==null?void 0:s.error}`),new m}},J=u(F(async a=>({mountpath:a.mountpath})),h(async a=>await b(a)),g({"/":n({view:i.jsx(S,{previewEnvironment:"editor"})}),"/pages/:page":d(a=>n({view:()=>i.jsx(x,{page:a.params.page}),data:{isContentPage:!0}}))}));export{J as default};
