import{s as F,T as l,j as e,Z as y,u as d,a2 as m,p,n as v,bd as I,be as B,bf as k,bg as w,B as x,r as b,bh as R,bi as D,J as V,K as A,H as L,U as M,W as P,M as W,S as U,aa as _}from"./index-CFPw1vJP.js";import{E as h}from"./EditorRow-Cyc30Qxl.js";import{C,S as O,A as H,I as $,F as S,a as z}from"./index-DE9PmoNh.js";import{u as f,I as g}from"./Header-p4OIyhRV.js";import{I as E}from"./InputRowLabel-DT0xESl6.js";import"./Card-XAp8rL3L.js";const G=F(l)(({theme:t})=>({width:"100%",textAlign:"left",color:t.palette.text.secondary}));function u({children:t}){return e.jsx(G,{variant:"body2",children:t})}const J=({formikConfig:t,onSuccess:i})=>{const s=y(),r=f({...t,onSubmit:async(o,{resetForm:a})=>{await d.getState().updateTeamTheme({actionColour:o.actionColour})&&(i(),a({values:o}))}});return e.jsx(j,{formik:r,legend:"Button colour",description:e.jsxs(e.Fragment,{children:[e.jsx(u,{children:"The button background colour should be either a dark or light colour. The text will be programmatically selected to contrast with the selected colour (being either black or white)."}),e.jsx(u,{children:e.jsx(m,{href:"https://opensystemslab.notion.site/10-Customise-the-appearance-of-your-services-3811fe9707534f6cbc0921fc44a2b193",target:"_blank",rel:"noopener noreferrer",children:"See our guide for setting button colours"})})]}),input:e.jsx(p,{children:e.jsx(g,{children:e.jsx(C,{color:r.values.actionColour,onChange:o=>r.setFieldValue("actionColour",o),label:"Button colour"})})}),preview:e.jsx(T,{bgcolor:"white",children:e.jsx(v,{variant:"contained",sx:{backgroundColor:r.values.actionColour,color:r.values.actionColour?I(r.values.actionColour,"#FFF"):"#FFF","&:hover":{backgroundColor:r.values.actionColour?B(r.values.actionColour,.2):s.palette.prompt.dark}},children:"Example primary button"})})})},K=({formikConfig:t,onSuccess:i})=>{const s=f({...t,onSubmit:async(o,{resetForm:a})=>{await d.getState().updateTeamTheme({favicon:o.favicon})&&(i(),a({values:o}))}}),r=o=>o?s.setFieldValue("favicon",o):s.setFieldValue("favicon",null);return e.jsx(j,{formik:s,legend:"Favicon",description:e.jsxs(e.Fragment,{children:[e.jsx(u,{children:"Set the favicon to be used in the browser tab. The favicon should be 32x32px and in .ico or .png format."}),e.jsx(u,{children:e.jsx(m,{href:"https://opensystemslab.notion.site/10-Customise-the-appearance-of-your-services-3811fe9707534f6cbc0921fc44a2b193",target:"_blank",rel:"noopener noreferrer",children:"See our guide for favicons"})})]}),input:e.jsxs(p,{children:[e.jsx(E,{children:"Favicon:"}),e.jsx(g,{width:s.values.favicon?90:50,children:e.jsx(k,{img:s.values.favicon||void 0,onChange:r,acceptedFileTypes:{"image/png":[".png"],"image/x-icon":[".ico"],"image/vnd.microsoft.icon":[".ico"]}})}),e.jsx(l,{color:"text.secondary",variant:"body2",pl:2,alignSelf:"center",children:".ico or .png"})]})})},N=({formikConfig:t,onSuccess:i})=>{const s=y(),r=f({...t,validate:({linkColour:o})=>{if(!(w("#FFF",o)>s.palette.contrastThreshold))return{linkColour:"Colour does not meet accessibility contrast requirements (3:1)"}},onSubmit:async(o,{resetForm:a})=>{await d.getState().updateTeamTheme({linkColour:o.linkColour})&&(i(),a({values:o}))}});return e.jsx(j,{formik:r,legend:"Text link colour",description:e.jsxs(e.Fragment,{children:[e.jsx(u,{children:'The text link colour should be a dark colour that contrasts with white ("#ffffff").'}),e.jsx(u,{children:e.jsx(m,{href:"https://opensystemslab.notion.site/10-Customise-the-appearance-of-your-services-3811fe9707534f6cbc0921fc44a2b193",target:"_blank",rel:"noopener noreferrer",children:"See our guide for setting text link colours"})})]}),input:e.jsx(p,{children:e.jsx(g,{children:e.jsx(C,{color:r.values.linkColour,onChange:o=>r.setFieldValue("linkColour",o),label:"Text link colour"})})}),preview:e.jsx(T,{bgcolor:"white",children:e.jsx(m,{sx:{color:r.values.linkColour},children:"Example text link"})})})},Z=({formikConfig:t,onSuccess:i})=>{const s=y(),r=d(n=>n.teamSlug),o=f({...t,validate:({primaryColour:n})=>{if(!(w("#FFF",n)>s.palette.contrastThreshold))return{primaryColour:"Theme colour does not meet accessibility contrast requirements (3:1)"}},onSubmit:async(n,{resetForm:c})=>{await d.getState().updateTeamTheme({primaryColour:n.primaryColour,logo:n.logo})&&(i(),c({values:n}))}}),a=n=>n?o.setFieldValue("logo",n):o.setFieldValue("logo",null);return e.jsx(j,{formik:o,legend:"Theme colour & logo",description:e.jsxs(e.Fragment,{children:[e.jsx(u,{children:'The theme colour and logo, are used in the header of the service. The theme colour should be a dark colour that contrasts with white ("#ffffff"). The logo should contrast with a dark background colour (your theme colour) and have a transparent background.'}),e.jsx(u,{children:e.jsx(m,{href:"https://opensystemslab.notion.site/10-Customise-the-appearance-of-your-services-3811fe9707534f6cbc0921fc44a2b193",target:"_blank",rel:"noopener noreferrer",children:"See our guide for setting theme colours and logos"})})]}),input:e.jsxs(e.Fragment,{children:[e.jsx(p,{children:e.jsx(g,{children:e.jsx(C,{color:o.values.primaryColour,onChange:n=>o.setFieldValue("primaryColour",n),label:"Theme colour"})})}),e.jsxs(p,{children:[e.jsx(E,{children:"Logo:"}),e.jsx(g,{width:o.values.logo?90:50,children:e.jsx(k,{backgroundColor:o.values.primaryColour,img:o.values.logo||void 0,onChange:a,acceptedFileTypes:{"image/png":[".png"],"image/svg+xml":[".svg"]}})}),e.jsx(l,{color:"text.secondary",variant:"body2",pl:2,alignSelf:"center",children:".png or .svg"})]})]}),preview:e.jsx(T,{bgcolor:o.values.primaryColour,children:o.values.logo?e.jsx("img",{width:"140",src:o.values.logo,alt:"council logo"}):e.jsxs(l,{color:s.palette.primary.contrastText,children:["Plan✕ / ",r]})})})},T=F(x)(({theme:t})=>({border:`2px solid ${t.palette.border.input}`,padding:t.spacing(2),boxShadow:"4px 4px 0px rgba(150, 150, 150, 0.5)"})),j=({formik:t,legend:i,description:s,input:r,preview:o})=>e.jsx(h,{background:!0,children:e.jsxs("form",{onSubmit:t.handleSubmit,children:[e.jsxs(R,{flowSpacing:!0,children:[e.jsx($,{children:i}),s,r]}),o&&e.jsxs(x,{children:[e.jsx(l,{variant:"h4",my:1,children:"Preview:"}),o]}),e.jsx(D,{error:Object.values(t.errors).join(", "),id:"design-settings-theme-error",children:e.jsxs(x,{children:[e.jsx(v,{type:"submit",variant:"contained",disabled:!t.dirty,children:"Save"}),e.jsx(v,{onClick:()=>t.resetForm(),type:"reset",variant:"contained",disabled:!t.dirty,color:"secondary",sx:{ml:1.5},children:"Reset changes"})]})})]})}),q=()=>{const[t,i]=b.useState(void 0);b.useEffect(()=>{(async()=>{try{const c=await d.getState().fetchCurrentTeam();if(!c)throw Error("Unable to find team");i({initialValues:c.theme,onSubmit:()=>{},validateOnBlur:!1,validateOnChange:!1,enableReinitialize:!0})}catch(c){console.error("Error fetching team:",c)}})()},[]);const[s,r]=b.useState(!1),o=(n,c)=>{c!=="clickaway"&&r(!1)},a=()=>r(!0);return e.jsxs(x,{maxWidth:"formWrap",mx:"auto",children:[e.jsxs(h,{children:[e.jsx(l,{variant:"h2",component:"h3",gutterBottom:!0,children:"Design"}),e.jsx(l,{variant:"body1",children:"How your service appears to public users."})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{formikConfig:t,onSuccess:a}),e.jsx(J,{formikConfig:t,onSuccess:a}),e.jsx(N,{formikConfig:t,onSuccess:a}),e.jsx(K,{formikConfig:t,onSuccess:a})]}),e.jsx(O,{open:s,autoHideDuration:6e3,onClose:o,children:e.jsx(H,{onClose:o,severity:"success",sx:{width:"100%"},children:"Theme updated successfully"})})]})},Q=()=>e.jsxs(x,{maxWidth:"formWrap",mx:"auto",children:[e.jsxs(h,{children:[e.jsx(l,{variant:"h2",component:"h3",gutterBottom:!0,children:"Team"}),e.jsx(l,{variant:"body1",children:"Manage who has permission to edit this service."})]}),e.jsx(h,{children:e.jsx(S,{title:"Feature in development"})}),e.jsx("hr",{}),e.jsxs(h,{children:[e.jsx(l,{variant:"h2",component:"h3",gutterBottom:!0,children:"Sharing"}),e.jsx(l,{variant:"body1",children:"Allow other teams on Plan✕ to find and use your service pattern."})]}),e.jsx(h,{children:e.jsx(S,{title:"Feature in development"})})]}),ne=V(_(t=>({mountpath:t.mountpath})),A({"/":L("./team"),"/:tab":M(async t=>{if(!d.getState().canUserEditTeam(t.params.team))throw new P(`User does not have access to ${t.originalUrl}`);return W(async s=>({title:U([s.params.team,"Team Settings"].join("/")),view:e.jsx(z,{currentTab:s.params.tab,tabs:[{name:"Team",route:"team",Component:Q},{name:"Design",route:"design",Component:q}]})}))})}));export{ne as default};
