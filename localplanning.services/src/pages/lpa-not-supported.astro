---
import Layout from "@layouts/Layout.astro";
import Masthead from "@components/Masthead.astro";
import Container from "@components/Container.astro";
---

<Layout>
  <Masthead title="Planning services are not available here">
    <p><strong><span id="lpa-name">Loading...</span></strong> does not currently provide its planning services on this platform.</p>
  </Masthead>
  <Container paddingY>
    <section class="styled-content">
      <h2>What does this mean?</h2>
        <p>We've identified your local planning authority as <strong><span id="lpa-name-2">Loading...</span></strong>, but they're not offering their planning services directly here right now.</p>
        <p>We expect to support more local planning authorities on this platform soon, check back in the future to see if <span id="lpa-name-3">Loading...</span> becomes available.</p>
    </section>
  </Container>
</Layout>

<script is:inline data-astro-rerun type="module">
  const updateLpaName = () => {
    const urlParams = new URLSearchParams(window.location.search);
    const lpaName = urlParams.get("lpa");

    if (lpaName) {
      const lpaNameElements = document.querySelectorAll("#lpa-name, #lpa-name-2, #lpa-name-3, #lpa-name-4");
      lpaNameElements.forEach(element => {
        element.textContent = decodeURIComponent(lpaName);
      });
    } else {
      const lpaNameElements = document.querySelectorAll('#lpa-name, #lpa-name-2, #lpa-name-3');
      lpaNameElements.forEach(element => {
        element.textContent = "Unknown Local Planning Authority";
      });
    }
  };

  document.addEventListener("astro:page-load", () => {
    updateLpaName();
  });

  updateLpaName();
</script>
