---
import Layout from "@layouts/Layout.astro";
import Masthead from "@components/Masthead.astro";
import Container from "@components/Container.astro";
---

<Layout>
  <Masthead title="Your local planning authority is not supported">
    <p><strong><span id="lpa-name">Loading...</span></strong> is not currently not offering any local planning services.</p>
  </Masthead>
  <Container paddingY>
    <section class="styled-content">
      <h2>What does this mean?</h2>
      <p>
        We've successfully identified your local planning authority as <strong><span id="lpa-name-2">Loading...</span></strong>, 
        but we don't currently provide planning services for this area.
      </p>
    </section>
  </Container>
</Layout>

<script is:inline data-astro-rerun type="module">
  const updateLpaName = () => {
    const urlParams = new URLSearchParams(window.location.search);
    const lpaName = urlParams.get("lpa");

    if (lpaName) {
      const lpaNameElements = document.querySelectorAll("#lpa-name, #lpa-name-2, #lpa-name-3, #lpa-name-4");
      lpaNameElements.forEach(element => {
        element.textContent = decodeURIComponent(lpaName);
      });
    } else {
      const lpaNameElements = document.querySelectorAll("#lpa-name, #lpa-name-2");
      lpaNameElements.forEach(element => {
        element.textContent = "Unknown Local Planning Authority";
      });
    }
  };

  document.addEventListener("astro:page-load", () => {
    updateLpaName();
  });

  updateLpaName();
</script>
